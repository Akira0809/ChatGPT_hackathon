<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <title>ゲーム画面</title>
    </head>
    <body class="main">
        {% block content %}
        {% csrf_token %}
        <p id="question"></p>
        <button onclick="judge('T')">True</button>
        <button onclick="judge('F')">False</button>
        <br>
        <p id="result"></p>
        <p id="commentary"></p>
        <button onclick="next()">次へ</button>
        <script>
            var index = 0;

            window.onload = function setup() {
                const data = JSON.parse("{{ data|escapejs }}");
                console.log(data);
                document.getElementById("question").textContent = data[index]["question"];
            }

            function judge(button_value) {
                const data = JSON.parse("{{ data|escapejs }}");
                if (document.getElementById("question").textContent == data[index]["question"]){
                    if (data[index]["answer"] == button_value){
                        document.getElementById("result").textContent = "正解";
                        document.getElementById("commentary").textContent = data[index]["commentary"];
                    }
                    else {
                        document.getElementById("result").textContent = "不正解";
                        document.getElementById("commentary").textContent = data[index]["commentary"];
                    }
                }
            }

            function next() {
                index++;
                window.location.reload();
            }
        </script>
        <style>
            .main {
                text-align: center;
            }
        </style>
        {% endblock %}
    </body>
</html>